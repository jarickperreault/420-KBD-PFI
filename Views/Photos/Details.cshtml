@model KBD_PFI.Models.Photo
@{
    ViewBag.Title = "Détails de photo";
    int currentPhotoId = (int)Session["currentPhotoId"];
    var user = ((KBD_PFI.Models.User)Session["ConnectedUser"]);
}
<div id="DetailsPanel"> <!-- Auto refreshed --></div>
    <div class="photoDetails">


        <div class="photoDetailsOwner">
            <div class="UserSmallAvatar" style="background-image : url('@Model.Owner.Avatar')" title="@Model.Owner.Name"></div>
            <span>@Model.Owner.Name</span>
        </div>
        <hr />
        <div class="photoDetailsTitle">@Model.Title</div>
        <a href="@Model.Image" target="_blank">
            <img src="@Model.Image" class="photoDetailsLargeImage" />
        </a>
        <div class="photoDetailsCreationDate">
            <!--Le to string doit être changé pour que ça affiche dans un format qui montre le jour ou le truc de "Il y a x heures"-->
            <span>@Model.CreationDate.ToString("yyyy,MM,dd")</span>
            <div class="likesSummary">
                @Model.CommentsCount
                <i class="cmdIconSmall fa-regular fa-comment" title="@Model.UsersLikesList"></i> 
                @Model.LikesCount
                <div style="font-size:1.1em" class="cmdIconSmall fa-regular fa-thumbs-up" id="addRemoveLikeCmd" photoid="@Model.Id" title="@Model.UsersLikesList"></div>
            </div>
        </div>
        <div class="photoDetailsDescription">@Model.Description</div>
    </div>

<hr />
<!-- Create new comment command icon -->
<div class="commentFooter ">
    <h4 style="margin-left:22px;">Commentaires</h4>
    <div class="commentSubFooter" style="font-size:1em">
        <i class="newCommentCmd cmdIcon fa-regular fa-comment" style="margin-top:-3px; z-index:1;font-size:1.5em" parentId="0" title="Ajouter un commentaire"></i>
    </div>
</div>
<details open style="position:relative; top:-40px;" id="commentDetails">
    <summary style="border: none; background: none;" title="Utilisez ctrl-clic pour développer/réduire"></summary>
    <!-- All comments rendering -->
    <div class="commentsSection" id="commentsSection">
        @Html.Partial("RenderComments", Model.Comments)
    </div>
    <!-- Hidden programmatically new comment UI -->
    <div class="newCommentLayout" photoId="@currentPhotoId" createCommentparentId="0">
        <div class="UserSmallAvatar" style="background-image:url('@user.Avatar')" title="@user.Name"></div>
<textarea class="form-control" rows="1" placeholder="commenter"></textarea>
        <div></div>
        <div class="editCommentFooter">
            <div></div>
            <!-- Commit create command icon -->
            <span class="createCommentCmd cmdIconSmall fa fa-check" parentId="0"></span>
            <!-- Abort update command icon -->
            <span class="abortCreateCommentCmd cmdIconSmall fa fa-times" parentId="0"></span>
        </div>
    </div>
</details>


